# Crypto Exchange API üöÄ - Peanut.trade

**Peanut.trade** ‚Äì —Ü–µ API-—Å–µ—Ä–≤—ñ—Å –¥–ª—è –∞–≥—Ä–µ–≥–∞—Ü—ñ—ó –¥–∞–Ω–∏—Ö –∑ –∫—Ä–∏–ø—Ç–æ–±—ñ—Ä–∂. –í—ñ–Ω –¥–æ–ø–æ–º–∞–≥–∞—î –∑–Ω–∞–π—Ç–∏ –Ω–∞–π–≤–∏–≥—ñ–¥–Ω—ñ—à–∏–π –∫—É—Ä—Å –æ–±–º—ñ–Ω—É –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç —Ç–∞ –æ—Ç—Ä–∏–º–∞—Ç–∏ –∞–∫—Ç—É–∞–ª—å–Ω—ñ –∫–æ—Ç–∏—Ä—É–≤–∞–Ω–Ω—è –∑ —Ä—ñ–∑–Ω–∏—Ö –±—ñ—Ä–∂.

## –Ø–∫ –ø—Ä–∞—Ü—é—î –ø—Ä–æ—î–∫—Ç? üîß

–ü—Ä–æ—î–∫—Ç —Å–∫–ª–∞–¥–∞—î—Ç—å—Å—è –∑ –∫—ñ–ª—å–∫–æ—Ö –æ—Å–Ω–æ–≤–Ω–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤, —è–∫—ñ –ø—Ä–∞—Ü—é—é—Ç—å —Ä–∞–∑–æ–º, —â–æ–± –Ω–∞–¥–∞—Ç–∏ –∞–∫—Ç—É–∞–ª—å–Ω—ñ –∫—É—Ä—Å–∏ –æ–±–º—ñ–Ω—É:
- API-—Å–µ—Ä–≤—ñ—Å –∑ –¥–≤–æ–º–∞ –æ—Å–Ω–æ–≤–Ω–∏–º–∏ –µ–Ω–¥–ø–æ—ñ–Ω—Ç–∞–º–∏:

  - **/estimate üí∞** ‚Äî –∑–Ω–∞—Ö–æ–¥–∏—Ç—å, –Ω–∞ —è–∫—ñ–π –±—ñ—Ä–∂—ñ –æ–±–º—ñ–Ω –±—É–¥–µ –Ω–∞–π–±—ñ–ª—å—à –≤–∏–≥—ñ–¥–Ω–∏–º.
  - **/getRates üìä** ‚Äî –ø–æ–≤–µ—Ä—Ç–∞—î –∫—É—Ä—Å–∏ –æ–±–º—ñ–Ω—É –¥–ª—è –≤–∏–±—Ä–∞–Ω–æ—ó –ø–∞—Ä–∏ –≤–∞–ª—é—Ç –Ω–∞ –≤—Å—ñ—Ö –ø—ñ–¥—Ç—Ä–∏–º—É–≤–∞–Ω–∏—Ö –±—ñ—Ä–∂–∞—Ö.
  
- WebSocket –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –∞–∫—Ç—É–∞–ª—å–Ω–∏—Ö –¥–∞–Ω–∏—Ö –ø—Ä–æ —Ü—ñ–Ω–∏ –∑ Uniswap.

## –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —ñ –∑–∞–ø—É—Å–∫ üî•

–©–æ–± –ø–æ—á–∞—Ç–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –ø—Ä–æ—î–∫—Ç, –≤–∏–∫–æ–Ω–∞–π—Ç–µ –∫—ñ–ª—å–∫–∞ –ø—Ä–æ—Å—Ç–∏—Ö –∫—Ä–æ–∫—ñ–≤:

### 2.1. –ö–ª–æ–Ω—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π üì•

–°–∫–∞—á–∞–π—Ç–µ –ø—Ä–æ—î–∫—Ç –Ω–∞ —Å–≤—ñ–π –∫–æ–º–ø'—é—Ç–µ—Ä:

```bash
git clone https://github.com/your_username/crypto_exchange_api.git
cd crypto_exchange_api
```

### 2.2. –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ ‚öôÔ∏è

–ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ —É –≤–∞—Å –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–π Python –≤–µ—Ä—Å—ñ—ó 3.11. –ü–æ—Ç—ñ–º –≤—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –≤—Å—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ:

```bash
pip install -r requirements.txt
```

### 2.3. –ù–∞–ª–∞—à—Ç—É–π—Ç–µ —Ñ–∞–π–ª .env üìÑ

–°—Ç–≤–æ—Ä—ñ—Ç—å —Ñ–∞–π–ª `.env` —É –∫–æ—Ä–µ–Ω—ñ –ø—Ä–æ—î–∫—Ç—É. –í –Ω—å–æ–º—É –ø–æ–≤–∏–Ω–Ω—ñ –±—É—Ç–∏ —Ç–∞–∫—ñ –¥–∞–Ω—ñ:

```ini
INFURA_PROJECT_ID=your_infura_project_id
```

–ó–∞–º—ñ—Å—Ç—å `your_infura_project_id` –≤—Å—Ç–∞–≤—Ç–µ –≤–∞—à Infura Project ID, —è–∫–∏–π –º–æ–∂–Ω–∞ –æ—Ç—Ä–∏–º–∞—Ç–∏ –Ω–∞ –æ—Ñ—ñ—Ü—ñ–π–Ω–æ–º—É —Å–∞–π—Ç—ñ Infura.

### 2.4. –ó–∞–ø—É—Å—Ç—ñ—Ç—å —Å–µ—Ä–≤–µ—Ä FastAPI üöÄ

–î–ª—è –∑–∞–ø—É—Å–∫—É —Å–µ—Ä–≤–µ—Ä–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É:

```bash
uvicorn app:app --reload
```

–¢–µ–ø–µ—Ä —Å–µ—Ä–≤–µ—Ä –±—É–¥–µ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –Ω–∞ [http://localhost:8000](http://localhost:8000). üéâ

## –Ø–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—Ç–∏—Å—è API? üì°

API –Ω–∞–¥–∞—î –¥–≤–∞ –æ—Å–Ω–æ–≤–Ω—ñ –µ–Ω–¥–ø–æ—ñ–Ω—Ç–∏ –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –ø—Ä–æ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–Ω—ñ –ø–∞—Ä–∏:

### 3.1. /estimate üí∞

–¶–µ–π –µ–Ω–¥–ø–æ—ñ–Ω—Ç –∑–Ω–∞—Ö–æ–¥–∏—Ç—å –Ω–∞–π–≤–∏–≥—ñ–¥–Ω—ñ—à—É –±—ñ—Ä–∂—É –¥–ª—è –æ–±–º—ñ–Ω—É –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–∏.

**–ü–∞—Ä–∞–º–µ—Ç—Ä–∏ –∑–∞–ø–∏—Ç—É:**

- `inputAmount` (float): –°—É–º–∞ –¥–ª—è –æ–±–º—ñ–Ω—É.
- `inputCurrency` (str): –í–∞–ª—é—Ç–∞, —è–∫—É –≤–∏ —Ö–æ—á–µ—Ç–µ –æ–±–º—ñ–Ω—è—Ç–∏ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, "BTC").
- `outputCurrency` (str): –í–∞–ª—é—Ç–∞, —è–∫—É –≤–∏ —Ö–æ—á–µ—Ç–µ –æ—Ç—Ä–∏–º–∞—Ç–∏ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, "USDT").

**–ü—Ä–∏–∫–ª–∞–¥ –∑–∞–ø–∏—Ç—É:**

```json
{
  "inputAmount": 0.5,
  "inputCurrency": "BTC",
  "outputCurrency": "USDT"
}
```

**–ü—Ä–∏–∫–ª–∞–¥ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ:**

```json
{
  "exchangeName": "binance",
  "outputAmount": 5500
}
```

### 3.2. /getRates üìä

–¶–µ–π –µ–Ω–¥–ø–æ—ñ–Ω—Ç –ø–æ–≤–µ—Ä—Ç–∞—î –∫—É—Ä—Å–∏ –æ–±–º—ñ–Ω—É –¥–ª—è –∑–∞–¥–∞–Ω–æ—ó –ø–∞—Ä–∏ –≤–∞–ª—é—Ç –Ω–∞ –≤—Å—ñ—Ö –ø—ñ–¥—Ç—Ä–∏–º—É–≤–∞–Ω–∏—Ö –±—ñ—Ä–∂–∞—Ö.

**–ü–∞—Ä–∞–º–µ—Ç—Ä–∏ –∑–∞–ø–∏—Ç—É:**

- `baseCurrency` (str): –ë–∞–∑–æ–≤–∞ –≤–∞–ª—é—Ç–∞.
- `quoteCurrency` (str): –í–∞–ª—é—Ç–∞ –¥–ª—è –∫–æ—Ç–∏—Ä—É–≤–∞–Ω–Ω—è.

**–ü—Ä–∏–∫–ª–∞–¥ –∑–∞–ø–∏—Ç—É:**

```json
{
  "baseCurrency": "BTC",
  "quoteCurrency": "ETH"
}
```

**–ü—Ä–∏–∫–ª–∞–¥ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ:**

```json
[
  { "exchangeName": "binance", "rate": 10 },
  { "exchangeName": "kucoin", "rate": 8 },
  { "exchangeName": "uniswap", "rate": 0.1 },
  { "exchangeName": "raydium", "rate": 0.12 }
]
```

## –Ø–∫ –¥–æ–¥–∞–≤–∞—Ç–∏ –Ω–æ–≤—ñ –±—ñ—Ä–∂—ñ –∞–±–æ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–∏? ‚öôÔ∏è

–ü—Ä–æ—î–∫—Ç –º–∞—î –≥–Ω—É—á–∫—É –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä—É, —â–æ –¥–æ–∑–≤–æ–ª—è—î –ª–µ–≥–∫–æ –¥–æ–¥–∞–≤–∞—Ç–∏ –Ω–æ–≤—ñ –±—ñ—Ä–∂—ñ —Ç–∞ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–∏:

### 4.1. –î–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–∏—Ö –ø—É–ª—ñ–≤ –¥–ª—è Uniswap

–î–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–∏—Ö –ø—É–ª—ñ–≤ –≤ Uniswap, –¥–æ—Å—Ç–∞—Ç–Ω—å–æ –æ–Ω–æ–≤–∏—Ç–∏ —Ñ–∞–π–ª `supported_pairs.py`, –¥–æ–¥–∞–≤—à–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—É –ø–∞—Ä—É (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, ETH/USDT). –í –Ω—å–æ–º—É –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤–∫–∞–∑–∞—Ç–∏:

- –ê–¥—Ä–µ—Å—É –ø—É–ª—É Uniswap.
- –ê–¥—Ä–µ—Å–∏ —Ç–æ–∫–µ–Ω—ñ–≤ –¥–ª—è —Ü—ñ—î—ó –ø–∞—Ä–∏.
- –†—ñ–∑–Ω–∏—Ü—é –≤ –¥–µ—Å—è—Ç–∫–æ–≤–∏—Ö –∑–Ω–∞–∫–∞—Ö –¥–ª—è –∫–æ—Ä–µ–∫—Ç–Ω–∏—Ö –æ–±—á–∏—Å–ª–µ–Ω—å (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –¥–ª—è USDT —Ç–∞ ETH —Ü–µ 12 –∑–Ω–∞–∫—ñ–≤ –ø—ñ—Å–ª—è –∫–æ–º–∏).

**–ü—Ä–∏–∫–ª–∞–¥ –∑–∞–ø–∏—Å–∏ –¥–ª—è –Ω–æ–≤–æ—ó –ø–∞—Ä–∏:**

```python
"NEW_PAIR": {
  "pool_address": "0xNewPoolAddressHere",
  "token0": "0xToken0AddressHere",
  "token1": "0xToken1AddressHere",
  "decimals_diff": 12
}
```

–ü—Ä–∏–º—ñ—Ç–∫–∞: –Ø–∫—â–æ –ø–∞—Ä–∞ –ø—ñ–¥—Ç—Ä–∏–º—É—î—Ç—å—Å—è –≤ Uniswap, –ø—Ä–æ—Å—Ç–æ –¥–æ–¥–∞–π—Ç–µ —ó—ó –≤ —Ü–µ–π —Å–ª–æ–≤–Ω–∏–∫.

### 4.2. –î–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–∏—Ö —Ü–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–∏—Ö –±—ñ—Ä–∂ (CEX)

–î–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–æ—ó —Ü–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–æ—ó –±—ñ—Ä–∂—ñ, —è–∫–∞ –ø—ñ–¥—Ç—Ä–∏–º—É—î—Ç—å—Å—è –±—ñ–±–ª—ñ–æ—Ç–µ–∫–æ—é `ccxt`, –ø–æ—Ç—Ä—ñ–±–Ω–æ:

- –ö–ª–æ–Ω—É–≤–∞—Ç–∏ —ñ—Å–Ω—É—é—á–∏–π —Ñ–∞–π–ª —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó –±—ñ—Ä–∂—ñ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `binance.py`).
- –ó–∞–º—ñ–Ω–∏—Ç–∏ –≤—Å—ñ –∑–≥–∞–¥–∫–∏ –ø—Ä–æ Binance –Ω–∞ –Ω–∞–∑–≤—É –Ω–æ–≤–æ—ó –±—ñ—Ä–∂—ñ.
- –ü–µ—Ä–µ–∫–æ–Ω–∞—Ç–∏—Å—è, —â–æ –≤–æ–Ω–∞ –ø—ñ–¥—Ç—Ä–∏–º—É—î—Ç—å—Å—è –≤ –±—ñ–±–ª—ñ–æ—Ç–µ—Ü—ñ `ccxt`.
- –ü—ñ—Å–ª—è —Ü—å–æ–≥–æ –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ –¥–æ–¥–∞—Ç–∏ —Ü–µ–π –∫–ª–∞—Å –¥–æ —Å–ø–∏—Å–∫—É `exchanges` —É —Ñ–∞–π–ª—ñ `app.py`, —â–æ–± API –º—ñ–≥ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –∑ –Ω–æ–≤–æ—é –±—ñ—Ä–∂–µ—é.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ—î–∫—Ç—É üóÇÔ∏è

–û—Å—å —è–∫ –≤–∏–≥–ª—è–¥–∞—î —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ—î–∫—Ç—É:

```plaintext
crypto_exchange_api/
‚îú‚îÄ‚îÄ app.py                  # –û—Å–Ω–æ–≤–Ω–∏–π —Ñ–∞–π–ª FastAPI –¥–æ–¥–∞—Ç–∫—É
‚îú‚îÄ‚îÄ exchanges/              # –ú–æ–¥—É–ª—ñ –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ –±—ñ—Ä–∂–∞–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py         # –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –ø–∞–∫–µ—Ç—É
‚îÇ   ‚îú‚îÄ‚îÄ base.py             # –ë–∞–∑–æ–≤–∏–π –∫–ª–∞—Å Exchange
‚îÇ   ‚îú‚îÄ‚îÄ uniswap.py          # –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –¥–ª—è Uniswap (DEX)
‚îÇ   ‚îú‚îÄ‚îÄ binance.py          # –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –¥–ª—è Binance
‚îÇ   ‚îú‚îÄ‚îÄ kucoin.py           # –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –¥–ª—è KuCoin
‚îÇ   ‚îú‚îÄ‚îÄ gate.py             # –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –¥–ª—è Gate.io
‚îú‚îÄ‚îÄ static/                 # –°—Ç–∞—Ç–∏—á–Ω—ñ —Ñ–∞–π–ª–∏ (HTML, CSS, JS)
‚îÇ   ‚îî‚îÄ‚îÄ index.html          # –í–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è API
‚îú‚îÄ‚îÄ requirements.txt        # –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –ø—Ä–æ—î–∫—Ç—É
‚îî‚îÄ‚îÄ README.md               # –¶–µ–π —Ñ–∞–π–ª
```


